pipeline {
  agent any

  tools { nodejs 'node' }

  environment {
        PATH = '/*/.cache/Cypress/*/Cypress/resources/app/packages/server/config/app.yml'
  }

  stages {
    stage('Cloning Git') {
      steps {
        sh 'git clone https://github.com/ironmamaximo2/projeto_base_gui_api_tests.git'
      }
    }
    stage('run e2e tests') {
      environment {
        
      }
    steps {
        sh 'npm run test_gui_all'
      }
    }
  }
  post {
    // Send an email in case of failure
    failure {
      mail to: "ironmaximo2@gmail.com", subject: "Cypress e2e Tests failure", body: "The Cypress e2e tests pipeline has failed"
    }
  }
}
