pipeline {
  agent any
 
  tools {nodejs "node"}

  stages {
    stage('Cloning Git') {
      steps {
        sh 'git clone https://github.com/ironmamaximo2/projeto_base_gui_api_tests.git'
      }
    }
    stage('run e2e tests') {
    steps {
        sh 'cd projeto_base_api_tests'
        sh 'npm i'
        sh 'npm run test_gui_all'
      }
    }
  }
  post {
    // Send an email in case of failure
    failure {
      mail to: "ironmaximo2@gmail.com", subject: "Cypress e2e Tests failure", body: "The Cypress e2e tests pipeline has failed"
    }
  }
}
